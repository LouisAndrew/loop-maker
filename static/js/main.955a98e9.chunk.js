(this["webpackJsonploop-maker"]=this["webpackJsonploop-maker"]||[]).push([[0],{119:function(t,e,n){},120:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n.n(r),c=n(27),o=n.n(c),i=(n(96),n(97),n(5)),s=n(83),l=n(165),u=n(166),d=n(4),b=n.n(d),j=n(12),f=n(7),h=n(13),p=n(9),O=n(49),x=n(79),C=n.n(x),m=["B","A#","A","G#","G","F#","F","E","D#","D","C#","C"],v=(["C"].concat(m,m),"__"),g=8,A=4,y=2,D=1,w=["bass-electric","cello","flute","guitar-acoustic","guitar-electric","piano","saxophone","violin"],k={"bass-electric":["As5","G5","E5","Cs5","As4","G4","E4","Cs4","As3","G3","E3","Cs3","As2","G2","E2","Cs2"],cello:["B4","As4","A4","Gs4","G4","Fs4","F4","E4","Ds4","D4","Cs4","C4","B3","As3","A3","Gs3","G3","Fs3","F3","E3","Ds3","D3","Cs3","C3"],clarinet:["F2","D3","F3","D4","D5","F4","Fs5","As2","As3","As4","D2"],flute:["C6","A5","E5","C5","A4","E4","C4","A3","E3","C3"],"guitar-acoustic":["B3","As3","A3","Gs3","G3","Fs3","F3","E3","Ds3","D3","Cs3","C3","B2","As2","A2","Gs2","G2","Fs2","F2","E2","Ds2","D2","Cs2","C2"],"guitar-electric":["A5","Fs5","Ds5","C5","A4","Fs4","Ds4","C4","A3","Fs3","Ds3","C3"],harp:["B3","C5","D2","D4","D6","D7","E1","E3","E5","F2","F4","F6","F7","G1","G3","G5","A2","A4","A6","B1","B5","B6","C3"],piano:["C5","B4","As4","A4","Gs4","G4","Fs4","F4","E4","Ds4","D4","Cs4","C4","B3","As3","A3","Gs3","G3","Fs3","F3","E3","Ds3","D3","Cs3","C3"],saxophone:["B3","As3","A3","Gs3","G3","Fs3","F3","E3","Ds3","D3","Cs3","C3"],violin:["C6","A5","G5","E5","C5","A4","G4","E4","C4"]},E=n(167),F=n(6),G=function(t){var e=t.playDuration,n=t.trackColor,a=Object(r.useState)(Math.random()),c=Object(p.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)(0),l=Object(p.a)(s,2),d=l[0],b=l[1],j=0!==e,f=function(){b(0),i(Math.random())};return Object(r.useEffect)((function(){var t;return e>0?t=setInterval((function(){b((function(t){return 100===t?t:t+1}))}),e/100):f(),function(){t&&(f(),clearInterval(t))}}),[e]),j?Object(F.jsxs)(u.a,{position:"absolute",bgcolor:"rgba(0, 0, 0, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",sx:{backdropFilter:"blur(1px)",zIndex:99,top:0,left:0,right:0,bottom:0},children:[Object(F.jsx)(u.a,{color:"#fff",fontWeight:"bold",fontSize:"32px",children:"PLAYING AUDIO"}),Object(F.jsx)(u.a,{width:"20vw",color:"primary.".concat(n),sx:{marginTop:3},children:Object(F.jsx)(E.a,{color:"inherit",variant:"determinate",value:d},o)})]}):null};G.defaultProps={trackColor:"yellow"};var I=G,B=n(155),S=n(168),R=n(164),z=n(161),M=n(162),P=n(158),W=n(160),N=n(81),T=n.n(N),_=n(82),J=function(t){var e=t.trackColor,n=void 0===e?"yellow":e,c=t.onPlay,o=t.trackName,s=void 0===o?"Track 1":o,l=Object(r.useState)([]),d=Object(p.a)(l,2),b=d[0],h=d[1],O=Object(r.useState)({}),x=Object(p.a)(O,2),C=x[0],m=x[1],g=Object(r.useState)(Math.random()),A=Object(p.a)(g,2),y=A[0],D=A[1],E=Object(r.useState)("piano"),G=Object(p.a)(E,2),I=G[0],N=G[1],J=Object(r.useMemo)((function(){return k[I]}),[I]),L=Object(r.useRef)(!0),U=function(){return D(Math.random())};Object(r.useEffect)((function(){L.current?L.current=!1:U()}),[b,C]),Object(r.useEffect)((function(){L.current||h((function(t){return t.filter((function(t){var e=t.split(v)[0];return J.length>parseInt(e,10)}))}))}),[J]);var V="primary.".concat(n);return Object(F.jsxs)(B.a,{padding:4,children:[Object(F.jsxs)(B.a,{direction:"row",alignItems:"flex-end",justifyContent:"space-between",paddingBottom:2,paddingLeft:"54px",paddingRight:"27px",children:[Object(F.jsx)(S.a,{color:V,variant:"h5",fontWeight:"bold",children:s}),Object(F.jsxs)(B.a,{direction:"row",alignItems:"flex-end",spacing:1,children:[Object(F.jsx)(R.a,{onClick:function(){c(b.map((function(t){var e;return"".concat(t).concat(v).concat(null!==(e=C[t])&&void 0!==e?e:0)})),I)},sx:{backgroundColor:V,"&:hover":{backgroundColor:V}},children:"Play"}),Object(F.jsx)(R.a,{onClick:function(){h([]),m([])},variant:"outlined",sx:{color:V,borderColor:V},children:"Clear"}),Object(F.jsx)(u.a,{sx:{width:64},children:Object(F.jsxs)(z.a,{size:"small",sx:{minWidth:80},children:[Object(F.jsx)(M.a,{id:"instrument",sx:{color:V},children:"Instrument"}),Object(F.jsx)(P.a,{labelId:"instrument",id:"instrument-input",value:I,defaultValue:"piano",label:"Instrument",autoWidth:!0,variant:"filled",onChange:function(t){return N(t.target.value)},sx:{color:V},children:w.map((function(t){return Object(F.jsx)(W.a,{value:t,children:t},t)}))})]})})]})]}),Object(F.jsx)(B.a,{spacing:.25,children:J.map((function(t,e){return Object(F.jsxs)(B.a,{width:"fit-content",spacing:.25,direction:"row",alignItems:"center",sx:{borderWidth:1,borderStyle:"solid",borderColor:"transparent",borderRadius:.5,"&:hover":{borderColor:V,transition:"200ms"}},children:[Object(F.jsx)(u.a,{height:24,width:50,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",color:V,children:t.replace("s","#")}),(n=48,Array.from(Array(n))).map((function(t,n){var r="".concat(e).concat(v).concat(n),c=C[r];return Object(F.jsx)(a.a.Fragment,{children:Object(F.jsx)(u.a,{width:24,height:24,borderRadius:.5,sx:{backgroundColor:"primary.dark","&:hover":{backgroundColor:"primary.main",opacity:[.9,.8,.7]}},onClick:function(){return t=r,void(b.includes(t)?(h((function(e){return e.filter((function(e){return e!==t}))})),m((function(e){return T()(e,[t])}))):(h([].concat(Object(j.a)(b),[t])),m(Object(i.a)(Object(i.a)({},C),{},Object(f.a)({},t.toString(),1)))));var t},children:b.includes(r)&&c?Object(F.jsx)(_.ResizableBox,{height:24,width:24*c+2*(c-1),axis:"x",handleSize:[10,10],onResizeStop:function(t,e){!function(t,e){var n=e.split(v),r=Object(p.a)(n,2),a=r[0],c=r[1];if(b.includes("".concat(a).concat(v).concat(parseInt(c,10)+1)))U();else{var o=Math.floor(t/32)+(t%32>0?1:0),s=parseInt(c,10)+o-1;[b.includes(s),s>=48].some(Boolean)?U():m((function(t){return Object(i.a)(Object(i.a)({},t),{},Object(f.a)({},e,o))}))}}(e.size.width,r)},children:Object(F.jsx)(u.a,{bgcolor:V,height:"100%",width:"100%",borderRadius:.5})}):null})},"col-".concat(n))}))]},"row-".concat(e));var n}))},y)]})};J.defaultProps={trackColor:"yellow",trackName:"Track 1"};var L=J,U=function(){var t=Object(r.useState)(0),e=Object(p.a)(t,2),n=e[0],a=e[1],c=function(t,e){return[Math.floor(t/e),t%e]},o=function(t){var e=c(t,g),n=Object(p.a)(e,2),r=n[0],a=n[1],o=c(a,A),i=Object(p.a)(o,2),s=i[0],l=i[1],u=c(l,y),d=Object(p.a)(u,2),b=d[0],j=d[1],f=c(j,D);return{"1n":r,"2n":s,"4n":b,"8n":Object(p.a)(f,1)[0]}},s=function(t){return O.b.toSeconds(t)},l=function(){var t=Object(h.a)(b.a.mark((function t(e,n){var r,c,l,u;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.map((function(t){var e=t.split(v),n=Object(p.a)(e,3),r=n[0],a=n[1],c=n[2];return{row:r,duration:o(c),start:o(a)}})),c=Object.entries(C()(r,(function(t){return t.row}))).map((function(t){var e=Object(p.a)(t,2),r=e[0],a=e[1];return{note:k[n][r],noteDatas:a}})),r.length>0&&(l=c.reduce((function(t,e){return Object(i.a)(Object(i.a)({},t),{},Object(f.a)({},e.note.replace("s","#").toString(),e.note+".mp3"))}),{}),u=new O.a({urls:l,baseUrl:"https://louisandrew.github.io/loop-maker/samples/"+n+"/",onload:function(){var t=Object(h.a)(b.a.mark((function t(){var e,n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(j.a)(r).map((function(t){return e=t.start,n=t.duration,1e3*(s(e)+s(n));var e,n})),n=e.sort((function(t,e){return e-t}))[0],a(n),setTimeout((function(){a(0),u.dispose()}),n+500),O.b.cancel(n/1e3),t.next=7,O.c();case 7:c.forEach((function(t){var e=t.note;t.noteDatas.forEach((function(t){var n=t.duration,r=t.start;u.triggerAttackRelease(e.replace("s","#"),n,"+"+s(r))}))}));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}).toDestination());case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();return Object(F.jsxs)(u.a,{children:[Object(F.jsx)(I,{trackColor:"yellow",playDuration:n}),Object(F.jsx)(L,{trackColor:"yellow",onPlay:l})]})},V={main:"#646464",secondary:"#fff",bg:"#3E3C3C",dark:"#525151",light:"#706c6c",yellow:"#E3EA91",yellow_darker:"#edd640",yellow_c:"#eeff00"};n(119);var Y=function(){var t=Object(s.a)({palette:{primary:Object(i.a)({},V)}});return Object(F.jsx)("div",{className:"App",children:Object(F.jsx)(l.a,{theme:t,children:Object(F.jsx)(u.a,{bgcolor:"primary.bg",display:"flex",alignItems:"center",justifyContent:"center",height:"100vh",children:Object(F.jsx)(U,{})})})})};o.a.render(Object(F.jsx)(Y,{}),document.getElementById("root"))},96:function(t,e,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.955a98e9.chunk.js.map